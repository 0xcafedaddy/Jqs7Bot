<html>
<head>
  <meta charset = "utf-8">
  <title>Jqs7Bot</title>
</head>
<body>
<div id = "total" style = "height:500px;width:1200px"></div>
<div id = "users" style = "height:500px;width:1200px"></div>
</body>
</html>
<script src = "//cdn.bootcss.com/echarts/2.2.7/echarts.js"></script>
<script type = "text/javascript">
  require.config({
    paths: {
      echarts: '//cdn.bootcss.com/echarts/2.2.7'
    }
  });
  require(
          [
            'echarts',
            'echarts/chart/line',
          ],
          function (ec) {
            var total = ec.init(document.getElementById('total'));
            var users = ec.init(document.getElementById('users'));

            var total_option = {
              tooltip: {
                show: true,
//                formatter: function (params, ticket, callback) {
//                  console.log(params);
//                  var res = 'Function formatter : <br/>' + '<a href="http://baidu.com" target="_blank">' + params['data'] + '</a>';
//                  for (var i = 0, l = params.length; i < l; i++) {
//                    res += '<br/>' + params[i].seriesName + ' : ' + params[i].value;
//                  }
//                  setTimeout(function () {
//                    callback(ticket, res);
//                  }, 1000);
//                  return 'loading';
//                },
//                showDelay: 300,
//                hideDelay: 9999,
//                transitionDuration: 0
              },
              yAxis: [],
              xAxis: [
                {
                  data: [{{range $element := .total}}{{with $element}}{{.date.Format "2006-01-02"}},{{end}}{{end}}]
                }
              ],
              series: [
                {
                  "name": "total",
                  "type": "line",
                  "data": [{{range $element := .total}}{{with $element}}{{.total}},{{end}}{{end}}]
                },
              ]
            };

            var users_option = {
              tooltip: {
                show: true,
//                formatter: function (params, ticket, callback) {
//                  console.log(params);
//                  var res = 'Function formatter : <br/>' + '<a href="http://baidu.com" target="_blank">' + params['data'] + '</a>';
//                  for (var i = 0, l = params.length; i < l; i++) {
//                    res += '<br/>' + params[i].seriesName + ' : ' + params[i].value;
//                  }
//                  setTimeout(function () {
//                    callback(ticket, res);
//                  }, 1000);
//                  return 'loading';
//                },
//                showDelay: 300,
//                hideDelay: 9999,
//                transitionDuration: 0
              },
              yAxis: [],
              xAxis: [
                {
                  data: [{{range $element := .users}}{{with $element}}{{.date.Format "2006-01-02"}},{{end}}{{end}}]
                }
              ],
              series: [
                {
                  "name": "total",
                  "type": "line",
                  "data": [{{range $element := .users}}{{with $element}}{{.userCount}},{{end}}{{end}}]
                },
              ]
            };
            total.setOption(total_option);
            users.setOption(users_option);
          }
  );
</script>
</script>
